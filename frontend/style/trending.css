/* trending.css - Game Leaderboard with Entrance Animations & Fireworks */

@import url("https://fonts.googleapis.com/css2?family=DotGothic16&family=Press+Start+2P&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap");

:root {
  --bg-color: #fff8f0;
  --dot-color: #e6dace;
  --text-main: #212529;
  --border-color: #212529;
  --gold: #ffd700;
  --silver: #c0c0c0;
  --bronze: #cd7f32;
  --list-bg: #ffffff;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; font-size: 18px; font-family: "Press Start 2P", monospace;
  background-color: var(--bg-color);
  background-image: radial-gradient(var(--dot-color) 20%, transparent 20%);
  background-position: 0 0; background-size: 20px 20px; color: var(--text-main);
  overflow-x: hidden;
  cursor: url("https://unpkg.com/nes.css@latest/assets/cursor.png"), auto;
}

/* ===== 顶部栏 & 通用 ===== */
.topBar { padding: 16px; position: sticky; top: 0; z-index: 100; }
.backBtn {
  background: #fff; border: 4px solid var(--border-color); padding: 8px 12px;
  text-decoration: none; color: inherit; box-shadow: 4px 4px 0 var(--border-color);
  display: inline-block; transition: transform 0.1s;
}
.backBtn:hover {
  cursor: url("https://unpkg.com/nes.css@latest/assets/cursor-click.png"), pointer;
}
.backBtn:active { transform: translate(4px, 4px); box-shadow: none; }
.scrollArea { padding: 10px 20px 120px; max-width: 900px; margin: 0 auto; }
.pageTitle { text-align: center; font-size: 24px; margin-bottom: 40px; text-shadow: 3px 3px 0 #fff; }


@keyframes podium-entrance {
  0% { opacity: 0; transform: translateY(50px) scale(0.8); }
  70% { opacity: 1; transform: translateY(-10px) scale(1.05); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

/* 第一名持续呼吸光环 */
@keyframes winner-pulse {
  0%, 100% { box-shadow: 10px 10px 0 var(--gold); }
  50% { box-shadow: 10px 10px 15px var(--gold), 0 0 20px var(--gold); }
}


.podium {
  display: flex; justify-content: center; align-items: flex-end;
  gap: 20px; margin-bottom: 50px; flex-wrap: wrap;
}

.rankCard {
  background: #fff; border: 4px solid var(--border-color); padding: 20px;
  display: flex; flex-direction: column; align-items: center; text-align: center;
  position: relative; width: 160px;
  opacity: 0;
  animation: podium-entrance 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  text-decoration: none;
  color: inherit;
}
.rankCard:hover {
  cursor: url("https://unpkg.com/nes.css@latest/assets/cursor-click.png"), pointer;
}
.rankCard.second { animation-delay: 0.2s; }
.rankCard.first { animation-delay: 0.4s; }
.rankCard.third { animation-delay: 0.3s; }

/* Hover & Click 效果 */
.rankCard:hover { transform: translateY(-5px); }
.rankCard:active { transform: scale(0.98) translateY(0); }

/* Logo 容器 & 本体 */
.rankLogoSlot {
  width: 90px; height: 90px; margin-bottom: 16px; background: transparent;
  border: none; display: grid; place-items: center; position: relative;
}
.rankLogoSlot > img, .rankLogoSlot > span {
  width: 100%; height: 100%; object-fit: contain; display: grid; place-items: center;
  background: #fff; border: 3px solid var(--border-color); position: relative; z-index: 2;
  animation-duration: 1s; animation-fill-mode: both;
}
.rankName { 
  font-family: "DotGothic16", sans-serif;
  font-size: 18px; 
  margin: 0 0 10px 0; 
  line-height: 1.4; 
  height: auto; /* 取消固定高度限制，防止字体变大被切掉 */
  overflow: visible;
  font-weight: bold;}

.rankMeta { 
  font-family: "DotGothic16", sans-serif;
  font-size: 12px;}
.rankBadge { font-size:10px; color:#aaa; margin-top:4px; }

/* --- 1. 冠军 (Gold) --- */
.rankCard.first {
  order: 2; width: 190px; padding: 30px 20px; z-index: 2;
  transform: translateY(-20px);
}
/* 【新增】动画完成后，覆盖默认样式，应用呼吸光环 */
.rankCard.first[style*="opacity: 1"] {
    animation: winner-pulse 2s infinite !important;
}
/* 保持 hover 效果 */
.rankCard.first:hover {
  transform: translateY(-25px) !important;
  box-shadow: 12px 12px 0 var(--gold-shadow) !important;
}

.crown {
  position: absolute; top: -35px; left: 50%; transform: translateX(-50%);
  font-size: 36px; filter: drop-shadow(3px 3px 0 #000); z-index: 3; transition: transform 0.3s;
}
.rankCard.first:hover .crown { transform: translateX(-50%) translateY(-10px) rotate(5deg); }
.championBanner { background:var(--gold); color:#000; font-size:10px; padding:4px 8px; border:3px solid #000; }

/* 冠军 Logo 互动动画 (Tada) */
.rankCard.first:hover .rankLogoSlot > * { animation-name: animate__tada; animation-iteration-count: infinite; }

/* 冠军 Logo hover 烟花特效 (复用之前的逻辑) */
.rankLogoSlot::before {
  content: ''; position: absolute; top: 50%; left: 50%; width: 0; height: 0;
  transform: translate(-50%, -50%); z-index: 1; pointer-events: none;
  box-shadow: 0 0 0 0 var(--gold), 0 0 0 0 #ff9fb2, 0 0 0 0 #a2d2ff;
  opacity: 0; transition: all 0.1s ease-out;
}
.rankCard.first:hover .rankLogoSlot::before { animation: pixel-fireworks-hover 0.8s ease-out infinite; }
@keyframes pixel-fireworks-hover {
  0% { width: 10px; height: 10px; opacity: 1; box-shadow: 0 -40px 0 -4px var(--gold), 40px 0 0 -4px #ff9fb2, 0 40px 0 -4px #a2d2ff, -40px 0 0 -4px var(--gold), 30px -30px 0 -4px #ff9fb2, 30px 30px 0 -4px #a2d2ff, -30px 30px 0 -4px var(--gold), -30px -30px 0 -4px #ff9fb2; }
  100% { width: 120px; height: 120px; opacity: 0; box-shadow: 0 -80px 0 -8px var(--gold), 80px 0 0 -8px #ff9fb2, 0 80px 0 -8px #a2d2ff, -80px 0 0 -8px var(--gold), 60px -60px 0 -8px #ff9fb2, 60px 60px 0 -8px #a2d2ff, -60px 60px 0 -8px var(--gold), -60px -60px 0 -8px #ff9fb2; }
}

/* --- 2. 亚军 (Silver - Swing) --- */
.rankCard.second { order: 1; box-shadow: 8px 8px 0 var(--silver); }
.rankCard.second:hover { box-shadow: 10px 10px 0 var(--silver-shadow); transform: translateY(-5px) !important;}
.rankCard.second:hover .rankLogoSlot > * { animation-name: animate__swing; animation-iteration-count: infinite; }

/* --- 3. 季军 (Bronze - RubberBand) --- */
.rankCard.third { order: 3; box-shadow: 8px 8px 0 var(--bronze); }
.rankCard.third:hover { box-shadow: 10px 10px 0 var(--bronze-shadow); transform: translateY(-5px) !important;}
.rankCard.third:hover .rankLogoSlot > * { animation-name: animate__rubberBand; animation-iteration-count: infinite; }


.rankingList { display: flex; flex-direction: column; gap: 16px; }
.listItem {
  display: flex; align-items: center; background: var(--list-bg);
  border: 3px solid var(--border-color); padding: 12px;
  box-shadow: 5px 5px 0 #ddd; transition: transform 0.1s;
  /* 列表也加一个简单的淡入 */
  opacity: 0; animation: fadeIn 0.5s ease-out forwards; animation-delay: 0.8s;
}
.listItem:hover {
  cursor: url("https://unpkg.com/nes.css@latest/assets/cursor-click.png"), pointer;
}
@keyframes fadeIn { to { opacity: 1; } }
.listItem:active { transform: translate(3px, 3px); box-shadow: 2px 2px 0 #ddd; }
.rankNum { font-size: 16px; width: 36px; text-align: center; font-weight: bold; color: #888; }
.listLogo { width: 50px; height: 50px; border: 3px solid #eee; margin: 0 16px; object-fit: contain; background: #fff; }
.listInfo { flex: 1; } 

.listName { 
  font-family: "DotGothic16", sans-serif; 
  font-size: 16px; 
  font-weight: bold;
  letter-spacing: 1px;
  margin: 0; 
  line-height: 1.2; }

.listMeta { 
  font-family: "DotGothic16", sans-serif;
  font-size: 12px; /* 同时也稍微调大描述文字 */
  color: #666; 
  margin-top: 6px; 
  text-transform: uppercase;
}
.listArrow { font-size: 16px; padding: 0 10px; color: #aaa; }
.cartBtn {
  position: fixed; right: 24px; bottom: 24px; width: 72px; height: 72px;
  border-radius: 50%; border: 4px solid var(--border-color); background: #90ee90;
  box-shadow: 5px 5px 0 var(--border-color); font-size: 28px; z-index: 99; transition: transform 0.1s;
}

.cartBtn {
  position: fixed;
  right: 24px;
  bottom: 24px;
  width: 72px;
  height: 72px;

  /* 保持圆角和边框 */
  border-radius: 12px;
  border: 4px solid var(--border-color);
  
  /* 1. 背景色改为纯白，与其他卡片保持一致 */
  background-color: #ffffff;
  
  /* 2. 图片不变 */
  background-image: url('/assets/trending_page/picnic_basket_pixel.jpg');

  background-repeat: no-repeat;
  background-position: center;
  /* 稍微调大一点比例，效果更好 */
  background-size: 85%; 

  box-shadow: 6px 6px 0 rgba(0,0,0,0.2);
  z-index: 99;
  transition: transform 0.1s;
  
  /* 隐藏文字 */
  color: transparent;
  font-size: 0;
}

.cartBtn:hover {
  cursor: url("https://unpkg.com/nes.css@latest/assets/cursor-click.png"), pointer;
}

.cartBtn:active {
  transform: translate(6px, 6px);
  box-shadow: none;
}

.mario-firework {
  position: fixed; z-index: 200; pointer-events: none;
  width: 20px; height: 20px;
  background: var(--fw-color, gold); /* 默认金色，JS会随机修改 */
  /* 利用 box-shadow 制造十字形像素爆炸 */
  box-shadow: 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color);
  animation: mario-explode 0.8s ease-out forwards;
}

@keyframes mario-explode {
  0% {
    transform: scale(1); opacity: 1;
    box-shadow: 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color), 0 0 0 0 var(--fw-color);
  }
  50% {
    opacity: 1;
    /* 十字形扩散 */
    box-shadow: -40px 0 0 0 var(--fw-color), 40px 0 0 0 var(--fw-color), 0 -40px 0 0 var(--fw-color), 0 40px 0 0 var(--fw-color);
  }
  100% {
    transform: scale(1.5); opacity: 0;
    /* 扩散更远并消失 */
    box-shadow: -80px 0 0 -10px var(--fw-color), 80px 0 0 -10px var(--fw-color), 0 -80px 0 0 -10px var(--fw-color), 0 80px 0 0 -10px var(--fw-color);
  }
}


@media (max-width: 600px) {
  .podium { flex-direction: column; align-items: center; gap: 35px;}
  .rankCard.first { order: 1; width: 100%; max-width: 240px; transform: none; margin-top: 20px;}
  .rankCard.second { order: 2; width: 100%; max-width: 200px; }
  .rankCard.third { order: 3; width: 100%; max-width: 200px; }
  .crown { top: -40px; }
  /* 手机端动画延迟稍微改短一点，反应快点 */
  .rankCard.second { animation-delay: 0.1s; }
  .rankCard.third { animation-delay: 0.2s; }
  .rankCard.first { animation-delay: 0.3s; }
}
